<div class="page-container">
  <!-- Chatbot Button -->
  <button class="open-chat-btn" (click)="openChat()">ðŸ’¬</button>
  
  <!-- Chatbot Popup -->
  <div *ngIf="chatOpen" class="chat-popup">
    <div class="chat-header">
      <img src="https://upload.wikimedia.org/wikipedia/commons/e/ed/Aldo_Moro_portrait.jpg" alt="Aldo Moro" class="chat-avatar" />
      <span class="chat-name">Piombobot</span>
      <button class="close-chat-btn" (click)="closeChat()">X</button>
    </div>
    <div class="chat-body">
      <div class="messages">
        <div *ngFor="let msg of messages" class="message">
          {{ msg }}
        </div>
        <!-- Typing indicator -->
        <div *ngIf="isTyping" class="server-typing">Server is typing...</div>
      </div>
      <textarea placeholder="Type a message..." #message (input)="adjustHeight(message)" (keydown)="onKeydown($event, message)"></textarea>
      <button (click)="sendMessage(message)">Send</button>
    </div>
  </div>
</div>
